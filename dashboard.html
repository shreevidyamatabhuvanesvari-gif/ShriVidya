<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Teaching Panel</title>

<style>
body{
background:linear-gradient(135deg,#220033,#550077,#220033);
color:white;text-align:center;font-family:sans-serif;
}
#quizPanel{margin:30px auto;width:90%;max-width:750px;padding:20px;background:rgba(255,255,255,0.15);border-radius:12px}
button{padding:10px;margin:6px;border:none;border-radius:8px;background:#ff0066;color:white}
input{padding:8px;margin:5px;width:90%}
</style>
</head>
<body>

<div id="quizPanel">
<h3>‡§µ‡§ø‡§∑‡§Ø ‡§ö‡•Å‡§®‡•á‡§Ç</h3>
<button onclick="openSubject('‡§á‡§§‡§ø‡§π‡§æ‡§∏')">‡§á‡§§‡§ø‡§π‡§æ‡§∏</button>
<button onclick="openSubject('‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§®')">‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§®</button>
<button onclick="openSubject('‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§ú‡•ç‡§û‡§æ‡§®')">‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§ú‡•ç‡§û‡§æ‡§®</button>
<br><br>
<button onclick="location.href='dashboard_B.html'">üß© Topic Builder</button>
</div>

<script>
const fixedMain={
"‡§á‡§§‡§ø‡§π‡§æ‡§∏":["‡§™‡•ç‡§∞‡§æ‡§ö‡•Ä‡§® ‡§≠‡§æ‡§∞‡§§","‡§Æ‡§ß‡•ç‡§Ø‡§ï‡§æ‡§≤‡•Ä‡§® ‡§≠‡§æ‡§∞‡§§","‡§Ü‡§ß‡•Å‡§®‡§ø‡§ï ‡§≠‡§æ‡§∞‡§§"],
"‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§®":["‡§≠‡•å‡§§‡§ø‡§ï‡•Ä","‡§∞‡§∏‡§æ‡§Ø‡§® ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§®","‡§ú‡•Ä‡§µ ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§®"],
"‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§ú‡•ç‡§û‡§æ‡§®":["‡§≠‡§æ‡§∞‡§§","‡§µ‡§ø‡§∂‡•ç‡§µ","‡§ñ‡•á‡§≤"]
};

function getMain(subject){
return [...fixedMain[subject],...(JSON.parse(localStorage.getItem("main_"+subject)||"[]"))];
}

function openSubject(sub){
let html=`<h3>${sub} ‚Äî Main Topic</h3>`;
getMain(sub).forEach(m=>{
html+=`<button onclick="openMain('${sub}','${m}')">${m}</button>`;
});
html+=`<br><button onclick="location.reload()">‚¨ÖÔ∏è</button>`;
quizPanel.innerHTML=html;
}

function openMain(sub,main){
let subs=JSON.parse(localStorage.getItem("sub_"+sub+"_"+main)||"[]");
let html=`<h3>${main} ‚Äî Sub Topics</h3>`;
subs.forEach(s=>{
html+=`<button onclick="openSub('${sub}','${main}','${s}')">${s}</button>`;
});
html+=`<br><button onclick="openSubject('${sub}')">‚¨ÖÔ∏è</button>`;
quizPanel.innerHTML=html;
}

function openSub(sub,main,topic){
quizPanel.innerHTML=`
<h3>${topic}</h3>
<button onclick="addOne('${sub}','${main}','${topic}')">‚ûï One-liner</button>
<button onclick="viewOne('${sub}','${main}','${topic}')">üëÄ One-liner</button>
<br>
<button onclick="addQuiz('${sub}','${main}','${topic}')">‚ûï Quiz</button>
<button onclick="viewQuiz('${sub}','${main}','${topic}')">üëÄ Quiz</button>
<br><br>
<button onclick="openMain('${sub}','${main}')">‚¨ÖÔ∏è</button>
`;
}

/* ONE LINER EDIT ENABLED */
function addOne(sub,main,topic,i=null){
let qv="",av="",btn="‡§∏‡•á‡§µ";
if(i!==null){
let arr=JSON.parse(localStorage.getItem(sub+main+topic+"one")||"[]");
qv=arr[i].q;av=arr[i].a;btn="‡§Ö‡§™‡§°‡•á‡§ü";
}
quizPanel.innerHTML=`
<h3>One-liner</h3>
<input id=q value="${qv}" placeholder="‡§™‡•ç‡§∞‡§∂‡•ç‡§®">
<input id=a value="${av}" placeholder="‡§â‡§§‡•ç‡§§‡§∞">
<button onclick="saveOne('${sub}','${main}','${topic}',${i})">${btn}</button>`;
}

function saveOne(sub,main,topic,i){
let key=sub+main+topic+"one";
let arr=JSON.parse(localStorage.getItem(key)||"[]");
let d={q:q.value,a:a.value};
if(i==null)arr.push(d);else arr[i]=d;
localStorage.setItem(key,JSON.stringify(arr));
openSub(sub,main,topic);
}

function viewOne(sub,main,topic){
let key=sub+main+topic+"one";
let arr=JSON.parse(localStorage.getItem(key)||"[]");
let html="<h3>One-liners</h3>";
arr.forEach((x,i)=>{
html+=`<p>${x.q}<br>${x.a}<br>
<button onclick="addOne('${sub}','${main}','${topic}',${i})">‚úèÔ∏è</button></p><hr>`;
});
quizPanel.innerHTML=html;
}

/* QUIZ EDIT ENABLED */
function addQuiz(sub,main,topic,i=null){
let d={q:"",A:"",B:"",C:"",D:"",ans:"",exp:""},btn="‡§∏‡•á‡§µ";
if(i!==null){
let arr=JSON.parse(localStorage.getItem(sub+main+topic+"quiz")||"[]");
d=arr[i];btn="‡§Ö‡§™‡§°‡•á‡§ü";
}
quizPanel.innerHTML=`
<h3>Quiz</h3>
<input id=q value="${d.q}" placeholder="‡§™‡•ç‡§∞‡§∂‡•ç‡§®">
<input id=a1 value="${d.A}" placeholder="A">
<input id=a2 value="${d.B}" placeholder="B">
<input id=a3 value="${d.C}" placeholder="C">
<input id=a4 value="${d.D}" placeholder="D">
<input id=ans value="${d.ans}" placeholder="‡§â‡§§‡•ç‡§§‡§∞">
<input id=exp value="${d.exp}" placeholder="‡§µ‡•ç‡§Ø‡§æ‡§ñ‡•ç‡§Ø‡§æ">
<button onclick="saveQuiz('${sub}','${main}','${topic}',${i})">${btn}</button>`;
}

function saveQuiz(sub,main,topic,i){
let key=sub+main+topic+"quiz";
let arr=JSON.parse(localStorage.getItem(key)||"[]");
let d={q:q.value,A:a1.value,B:a2.value,C:a3.value,D:a4.value,ans:ans.value,exp:exp.value};
if(i==null)arr.push(d);else arr[i]=d;
localStorage.setItem(key,JSON.stringify(arr));
openSub(sub,main,topic);
}

function viewQuiz(sub,main,topic){
let key=sub+main+topic+"quiz";
let arr=JSON.parse(localStorage.getItem(key)||"[]");
let html="<h3>Quiz</h3>";
arr.forEach((x,i)=>{
html+=`<p>${x.q}<br>(A)${x.A}<br>(B)${x.B}<br>(C)${x.C}<br>(D)${x.D}<br>
‡§â‡§§‡•ç‡§§‡§∞:${x.ans}<br>${x.exp}
<br><button onclick="addQuiz('${sub}','${main}','${topic}',${i})">‚úèÔ∏è</button></p><hr>`;
});
quizPanel.innerHTML=html;
}
</script>
</body>
</html>
